{"remainingRequest":"C:\\Users\\RuiRui\\Desktop\\vue\\vue-router\\myapp\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\RuiRui\\Desktop\\vue\\vue-router\\myapp\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\RuiRui\\Desktop\\vue\\vue-router\\myapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\RuiRui\\Desktop\\vue\\vue-router\\myapp\\src\\views\\film\\nowplaying.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\RuiRui\\Desktop\\vue\\vue-router\\myapp\\src\\views\\film\\nowplaying.vue","mtime":1601099740460},{"path":"C:\\Users\\RuiRui\\Desktop\\vue\\vue-router\\myapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\RuiRui\\Desktop\\vue\\vue-router\\myapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\RuiRui\\Desktop\\vue\\vue-router\\myapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\RuiRui\\Desktop\\vue\\vue-router\\myapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9Vc2Vycy9SdWlSdWkvRGVza3RvcC92dWUvdnVlLXJvdXRlci9teWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgIkAvdmlld3MvZmlsdGVycy9hY3RvcnNNb3ZpZXMuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGFsaXN0OiBbXSwKICAgICAgaXNEaXNhYmxlZDogZmFsc2UsCiAgICAgIGN1cnJlbnQ6IDEsCiAgICAgIHRvdGFsOiAwCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgLy8gaHR0cHM6Ly9tLm1haXp1by5jb20vZ2F0ZXdheT9jaXR5SWQ9NDIwMTAwJnBhZ2VOdW09MiZwYWdlU2l6ZT0xMCZ0eXBlPTEmaz00MDI0MjMKICAgIGF4aW9zKHsKICAgICAgdXJsOiAiaHR0cHM6Ly9tLm1haXp1by5jb20vZ2F0ZXdheT9jaXR5SWQ9NDIwMTAwJnBhZ2VOdW09Ii5jb25jYXQodGhpcy5jdXJyZW50LCAiJnBhZ2VTaXplPTEwJnR5cGU9MSZrPTY4NDE2MzIiKSwKICAgICAgaGVhZGVyczogewogICAgICAgICJYLUNsaWVudC1JbmZvIjogJ3siYSI6IjMwMDAiLCJjaCI6IjEwMDIiLCJ2IjoiNS4wLjQiLCJlIjoiMTYwMDU3NzUyMTE1MzgxMTM2ODgwNDM1NCIsImJjIjoiNDIwMTAwIn0nLAogICAgICAgICJYLUhvc3QiOiAibWFsbC5maWxtLXRpY2tldC5maWxtLmxpc3QiCiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhKTsKICAgICAgX3RoaXMuZGF0YWxpc3QgPSByZXMuZGF0YS5kYXRhLmZpbG1zOwogICAgICBfdGhpcy50b3RhbCA9IHJlcy5kYXRhLmRhdGEudG90YWw7IC8v55S15b2x54mH5rqQ5Liq5pWwCiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUNoYW5nZVBhZzogZnVuY3Rpb24gaGFuZGxlQ2hhbmdlUGFnKGlkKSB7CiAgICAgIC8v57yW56iL5byP5a+86IiqCiAgICAgIC8vIGNvbnNvbGUubG9nKGlkKTsKICAgICAgLy8gdGhpcy4kcm91dGVyID09PSByb3V0ZS5qc+WumuS5ieeahOi3r+eUseWvueixoe+8jCAg5piv5a6M5pW06Lev55Sx5a+56LGhCiAgICAgIC8v5Yqo5oCB6Lev55SxIOi3s+i9rCAtMQogICAgICAvL+i3s+i9rOmhtemdogogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2RldGFpbC8iLmNvbmNhdChpZCkpOyAvLyAvZGV0YWlsLzQ1ODgKICAgICAgLy/liqjmgIHot6/nlLEg6Lez6L2sIC0yCiAgICAgIC8vdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ImRldGFpbCIscGFyYW1zOntrZXJ3aW5pZDppZH19KTsKICAgICAgLy9nZXTkvKDlj4Ig6Lez6L2s5pa55byPCiAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKGAvZGV0YWlsP2lkPSR7aWR9YCkKICAgIH0sCiAgICBsb2FkTW9yZTogZnVuY3Rpb24gbG9hZE1vcmUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5jdXJyZW50Kys7IC8v5b2T56ys5LiA5qyh5bqV6YOo6K+35rGC5pWw5o2u5pe256aB55So5peg6ZmQ5rua5YqoCgogICAgICB0aGlzLmlzRGlzYWJsZWQgPSB0cnVlOwogICAgICBjb25zb2xlLmxvZygi5Yiw5bqV5LqGIik7IC8v5Yik5pat6K+35rGC5a6M5LqG55qE55S15b2x54mH5pWw5piv5ZCm562J5LqO55S15b2x5oC754mH5rqQ5pWw5o2uIOWmguaenOetieS6juWImeS4jeWGjeivt+axguemgeeUqOa7muWKqOWKoOi9vSDkvJjljJbmgKfog73pgb/lhY3lkI7nq6/ml6DmlbDmja7liY3nq6/pobXpnaLkuIDnm7Tor7fmsYIKCiAgICAgIGlmICh0aGlzLmRhdGFsaXN0Lmxlbmd0aCA9PT0gdGhpcy50b3RhbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgYXhpb3MoewogICAgICAgIHVybDogImh0dHBzOi8vbS5tYWl6dW8uY29tL2dhdGV3YXk/Y2l0eUlkPTQyMDEwMCZwYWdlTnVtPSIuY29uY2F0KHRoaXMuY3VycmVudCwgIiZwYWdlU2l6ZT0xMCZ0eXBlPTEmaz02ODQxNjMyIiksCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIlgtQ2xpZW50LUluZm8iOiAneyJhIjoiMzAwMCIsImNoIjoiMTAwMiIsInYiOiI1LjAuNCIsImUiOiIxNjAwNTc3NTIxMTUzODExMzY4ODA0MzU0IiwiYmMiOiI0MjAxMDAifScsCiAgICAgICAgICAiWC1Ib3N0IjogIm1hbGwuZmlsbS10aWNrZXQuZmlsbS5saXN0IgogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOyAvLyB0aGlzLmRhdGFsaXN0ID0gcmVzLmRhdGEuZGF0YS5maWxtczsKCiAgICAgICAgX3RoaXMyLmRhdGFsaXN0ID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShfdGhpczIuZGF0YWxpc3QpLCBfdG9Db25zdW1hYmxlQXJyYXkocmVzLmRhdGEuZGF0YS5maWxtcykpOyAvL+ivt+axguWujOaVsOaNriDop6PpmaTml6DpmZDmu5rliqgKCiAgICAgICAgX3RoaXMyLmlzRGlzYWJsZWQgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["nowplaying.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAsBA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,iCAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,UAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA,CAHA;AAIA,MAAA,KAAA,EAAA;AAJA,KAAA;AAMA,GARA;AASA,EAAA,OATA,qBASA;AAAA;;AACA;AACA,IAAA,KAAA,CAAA;AACA,MAAA,GAAA,+DAAA,KAAA,OAAA,kCADA;AAEA,MAAA,OAAA,EAAA;AACA,yBACA,oFAFA;AAGA,kBAAA;AAHA;AAFA,KAAA,CAAA,CAOA,IAPA,CAOA,UAAA,GAAA,EAAA;AACA;AACA,MAAA,KAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA,MAAA,KAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,CAHA,CAGA;AACA,KAXA;AAYA,GAvBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,eADA,2BACA,EADA,EACA;AACA;AACA;AACA;AACA;AAEA;AACA,WAAA,OAAA,CAAA,IAAA,mBAAA,EAAA,GAPA,CAOA;AAEA;AACA;AAEA;AACA;AACA,KAfA;AAgBA,IAAA,QAhBA,sBAgBA;AAAA;;AACA,WAAA,OAAA,GADA,CAEA;;AACA,WAAA,UAAA,GAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,EAJA,CAKA;;AACA,UAAA,KAAA,QAAA,CAAA,MAAA,KAAA,KAAA,KAAA,EAAA;AACA;AACA;;AAEA,MAAA,KAAA,CAAA;AACA,QAAA,GAAA,+DAAA,KAAA,OAAA,kCADA;AAEA,QAAA,OAAA,EAAA;AACA,2BACA,oFAFA;AAGA,oBAAA;AAHA;AAFA,OAAA,CAAA,CAOA,IAPA,CAOA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,EADA,CAEA;;AACA,QAAA,MAAA,CAAA,QAAA,gCAAA,MAAA,CAAA,QAAA,sBAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,GAHA,CAIA;;AACA,QAAA,MAAA,CAAA,UAAA,GAAA,KAAA;AACA,OAbA;AAcA;AAxCA;AAxBA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <ul\r\n      v-infinite-scroll=\"loadMore\"\r\n      infinite-scroll-immediate-check=\"false\"\r\n      infinite-scroll-disabled=\"isDisabled\"\r\n    >\r\n      <li\r\n        v-for=\"data in datalist\"\r\n        :key=\"data.filmId\"\r\n        @click=\"handleChangePag(data.filmId)\"\r\n      >\r\n        <img :src=\"data.poster\" alt />\r\n        <h3>{{ data.name }}</h3>\r\n        <p>主演: {{ data.actors | actorsmovies }}</p>\r\n        <span>{{ data.nation }} | {{ data.runtime + \"分钟\" }}</span>\r\n        <button>购票</button>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport \"@/views/filters/actorsMovies.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      datalist: [],\r\n      isDisabled: false,\r\n      current: 1,\r\n      total: 0\r\n    };\r\n  },\r\n  mounted() {\r\n    // https://m.maizuo.com/gateway?cityId=420100&pageNum=2&pageSize=10&type=1&k=402423\r\n    axios({\r\n      url: `https://m.maizuo.com/gateway?cityId=420100&pageNum=${this.current}&pageSize=10&type=1&k=6841632`,\r\n      headers: {\r\n        \"X-Client-Info\":\r\n          '{\"a\":\"3000\",\"ch\":\"1002\",\"v\":\"5.0.4\",\"e\":\"1600577521153811368804354\",\"bc\":\"420100\"}',\r\n        \"X-Host\": \"mall.film-ticket.film.list\"\r\n      }\r\n    }).then(res => {\r\n      // console.log(res.data.data);\r\n      this.datalist = res.data.data.films;\r\n      this.total = res.data.data.total; //电影片源个数\r\n    });\r\n  },\r\n  methods: {\r\n    handleChangePag(id) {\r\n      //编程式导航\r\n      // console.log(id);\r\n      // this.$router === route.js定义的路由对象，  是完整路由对象\r\n      //动态路由 跳转 -1\r\n\r\n      //跳转页面\r\n      this.$router.push(`/detail/${id}`); // /detail/4588\r\n\r\n      //动态路由 跳转 -2\r\n      //this.$router.push({name:\"detail\",params:{kerwinid:id}});\r\n\r\n      //get传参 跳转方式\r\n      // this.$router.push(`/detail?id=${id}`)\r\n    },\r\n    loadMore() {\r\n      this.current++;\r\n      //当第一次底部请求数据时禁用无限滚动\r\n      this.isDisabled = true;\r\n      console.log(\"到底了\");\r\n      //判断请求完了的电影片数是否等于电影总片源数据 如果等于则不再请求禁用滚动加载 优化性能避免后端无数据前端页面一直请求\r\n      if (this.datalist.length === this.total) {\r\n        return;\r\n      }\r\n\r\n      axios({\r\n        url: `https://m.maizuo.com/gateway?cityId=420100&pageNum=${this.current}&pageSize=10&type=1&k=6841632`,\r\n        headers: {\r\n          \"X-Client-Info\":\r\n            '{\"a\":\"3000\",\"ch\":\"1002\",\"v\":\"5.0.4\",\"e\":\"1600577521153811368804354\",\"bc\":\"420100\"}',\r\n          \"X-Host\": \"mall.film-ticket.film.list\"\r\n        }\r\n      }).then(res => {\r\n        console.log(res.data);\r\n        // this.datalist = res.data.data.films;\r\n        this.datalist = [...this.datalist, ...res.data.data.films];\r\n        //请求完数据 解除无限滚动\r\n        this.isDisabled = false;\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\nul {\r\n  li {\r\n    position: relative;\r\n    overflow: hidden;\r\n    padding: 15px;\r\n    img {\r\n      float: left;\r\n      width: 70px;\r\n      height: 100px;\r\n    }\r\n    h3 {\r\n      font-weight: normal;\r\n      margin-left: 22%;\r\n      padding-top: 10px;\r\n      color: #191a1b;\r\n      font-size: 16px;\r\n    }\r\n    p {\r\n      position: absolute;\r\n      left: 24%;\r\n      bottom: 50px;\r\n      width: 200px;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n      font-size: 14px;\r\n      color: #797d82;\r\n    }\r\n    span {\r\n      position: absolute;\r\n      left: 24%;\r\n      bottom: 25px;\r\n      font-size: 14px;\r\n      color: #797d82;\r\n    }\r\n    button {\r\n      position: absolute;\r\n      right: 20px;\r\n      bottom: 70px;\r\n      line-height: 25px;\r\n      height: 25px;\r\n      width: 50px;\r\n      font-size: 13px;\r\n      text-align: center;\r\n      border-radius: 2px;\r\n      border: 1px solid #ff5f16;\r\n      color: #ff5f16;\r\n      background: #fff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/film"}]}